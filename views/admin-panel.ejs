<!DOCTYPE html>
<html lang="ru">

<head>
    <%- include('./partials/head') %>

    <link rel="stylesheet" href="/styles/alerts.css">
    <link rel="stylesheet" href="/styles/admin-page-styles.css">
    <link rel="stylesheet" href="/styles/main-page-styles.css">
    <title>Админ-панель</title>
</head>

<body>
    <div class="wrapper">
        <%- include('./partials/header') %>

        <main class="main">
            <div class="main_inner" id="main-page">
                <section class="users-table-section">
                    <div class="users-table-container">
                         <table id="users-table" class="users-table" style="width:100%">
                            <thead class="users-table-thead">
                                <th>Имя</th>
                                <th>Фамилия</th>
                                <th>Отчество</th>
                                <th>Почта</th>
                                <th>Статус</th>
                                <th></th>
                            </thead>
                            <tbody class="users-table-tbody">
                                <% users.forEach((user) => { %>
                                    <tr>
                                        <td class="js-user-name"><%=user.name%></td>
                                        <td class="js-user-surname"><%=user.surname%></td>
                                        <td class="js-user-middle_name"><%=user.middle_name%></td>
                                        <td><%=user.email%></td>
                                        <td>
                                            <select data-user="<%=user.user_id%>" name="user-status" class="js-select-status">
                                                <%  roles.forEach((role) => { 
                                                    if(role.role_id == user.role) { %> 
                                                    <option value="<%=role.role_id%>" selected><%=role.name%></option>
                                                <% } else { %> 
                                                    <option value="<%=role.role_id%>"><%=role.name%></option>
                                                <% }
                                                }) %>
                                            </select>
                                        </td>
                                        <td>
                                            <svg data-user="<%=user.user_id%>" class="js-delete-row-button js-button" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <circle cx="16" cy="16" r="16" fill="#BC3535"/>
                                                <path d="M12 16.052C13.995 16.052 15.5 14.547 15.5 12.552C15.5 10.557 13.995 9.052 12 9.052C10.005 9.052 8.5 10.557 8.5 12.552C8.5 14.547 10.005 16.052 12 16.052ZM13 17H11C8.243 17 6 19.243 6 22V23H18V22C18 19.243 15.757 17 13 17ZM24.293 12.293L22 14.586L19.707 12.293L18.293 13.707L20.585 15.999L18.292 18.292L19.706 19.706L21.999 17.413L24.293 19.707L25.707 18.293L23.414 16L25.707 13.707L24.293 12.293Z" fill="#E4E4E4"/>
                                            </svg>                                                
                                        </td>
                                    </tr>
                                <% }) %>
                            </tbody>
                        </table>
                    </div>
                </section>
            </div>
        </main>
        <%- include('./partials/footer') %>
    </div>
    <script src="/modules/datatables.net/js/dataTables.min.js"></script>
    <script src="/scripts/alerts.js"></script>
    <script src="/scripts/admin-panel-page-script.js"></script>
</body>

</html>